(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{23:function(t,e,n){t.exports={form:"ContactForm_form__4DevE",label:"ContactForm_label__3xhHY",input:"ContactForm_input__79zao",button:"ContactForm_button__1Drly"}},26:function(t,e,n){t.exports={link:"Navigation_link__3ZSex",activeLink:"Navigation_activeLink__5vEJC"}},27:function(t,e,n){t.exports={link:"AuthNav_link__WYNCn",activeLink:"AuthNav_activeLink__4Fc4d"}},35:function(t,e,n){t.exports={formContact:"ContactList_formContact__3fGrb",formContactItem:"ContactList_formContactItem__13kre",formContactButton:"ContactList_formContactButton__3S144"}},51:function(t,e,n){t.exports={header:"AppBar_header__3q77P"}},65:function(t,e,n){},95:function(t,e){},96:function(t,e,n){},99:function(t,e,n){"use strict";n.r(e);var c=n(1),a=n(0),r=n.n(a),o=n(21),i=n.n(o),s=n(3),u=n(50),l=n(16),b=(n(65),n(6)),j={getUserName:function(t){return t.auth.user.name},getIsLoggedIn:function(t){return t.auth.isLoggedIn},getIsFetchingCurrent:function(t){return t.auth.isFetchingCurrentUser}},d=n(26),f=n.n(d);function O(){var t=Object(s.c)(j.getIsLoggedIn);return Object(c.jsxs)("nav",{children:[Object(c.jsx)(l.b,{to:"/",exact:!0,className:f.a.link,activeClassName:f.a.activeLink,children:"\u0413\u043e\u043b\u043e\u0432\u043d\u0430"}),t&&Object(c.jsx)(l.b,{to:"/contacts",exact:!0,className:f.a.link,activeClassName:f.a.activeLink,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"})]})}var h=n(27),m=n.n(h);function g(){return Object(c.jsxs)("div",{children:[Object(c.jsx)(l.b,{to:"/register",exact:!0,className:m.a.link,activeClassName:m.a.activeLink,children:"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044f"}),Object(c.jsx)(l.b,{to:"/login",exact:!0,className:m.a.link,activeClassName:m.a.activeLink,children:"\u041b\u043e\u0433\u0456\u043d"})]})}var p=n(19),x=n.n(p),v=n(28),C=n(13),y=n.n(C),k=n(4);y.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var _=function(t){y.a.defaults.headers.common.Authorization="Bearer ".concat(t)},w=function(){y.a.defaults.headers.common.Authorization=""},I={register:Object(k.c)("auth/register",function(){var t=Object(v.a)(x.a.mark((function t(e){var n,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.post("/users/signup",e);case 3:return n=t.sent,c=n.data,_(c.token),t.abrupt("return",c);case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),logIn:Object(k.c)("auth/login",function(){var t=Object(v.a)(x.a.mark((function t(e){var n,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.post("/users/login",e);case 3:return n=t.sent,c=n.data,_(c.token),t.abrupt("return",c);case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),logOut:Object(k.c)("auth/logout",Object(v.a)(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.post("/users/logout");case 3:w(),t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))),fetchCurrentUser:Object(k.c)("auth/refresh",function(){var t=Object(v.a)(x.a.mark((function t(e,n){var c,a,r,o;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n.getState(),null!==(a=c.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return _(a),t.prev=5,t.next=8,y.a.get("/users/current");case 8:return r=t.sent,o=r.data,t.abrupt("return",o);case 13:t.prev=13,t.t0=t.catch(5);case 15:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}())},L=n.p+"static/media/default-avatar.1c69306b.bmp",N={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12}};function F(){var t=Object(s.c)(j.getUserName),e=Object(s.b)();return Object(c.jsxs)("div",{style:N.container,children:[Object(c.jsx)("img",{src:L,alt:"",width:"32",style:N.avatar}),Object(c.jsxs)("span",{style:N.name,children:["\u041b\u0430\u0441\u043a\u0430\u0432\u043e \u043f\u0440\u043e\u0441\u0438\u043c\u043e, ",t||""]}),Object(c.jsx)("button",{type:"button",onClick:function(){return e(I.logOut())},children:"\u0412\u0438\u0439\u0442\u0438"})]})}var S=n(51),U=n.n(S);function D(){var t=Object(s.c)(j.getIsLoggedIn);return Object(c.jsxs)("header",{className:U.a.header,children:[Object(c.jsx)(O,{}),t?Object(c.jsx)(F,{}):Object(c.jsx)(g,{})]})}function T(){return Object(c.jsx)("h2",{children:"\u0412\u0456\u0442\u0430\u0454\u043c\u043e \u043d\u0430 \u0433\u043e\u043b\u043e\u0432\u043d\u0456\u0439 \u0441\u0442\u043e\u0440\u0456\u043d\u0446\u0456!"})}var B=n(17),E=(n(86),n(95),Object(k.b)("Contact/getContactsRequest")),A=Object(k.b)("Contact/getContactsSuccess"),R=Object(k.b)("Contact/getContactsError"),q=Object(k.b)("Contact/addContactRequest"),z=Object(k.b)("Contact/addContactSuccess"),P=Object(k.b)("Contact/addContactError"),J=Object(k.b)("Contact/deleteContactRequest"),V=Object(k.b)("Contact/deleteContactSuccess"),W=Object(k.b)("Contact/deleteContactError"),Y=Object(k.b)("Contact/ChangeFilter"),G=function(t){return function(e){e(J()),y.a.delete("/contacts/".concat(t)).then((function(){return e(V(t))})).catch((function(t){return e(W(t))}))}},H=n(23),M=n.n(H),Z=n(31),K=function(t){return t.contacts.item},Q=function(t){return t.contacts.filter},X={getContactsItem:K,getFilter:Q,getVisibleContacts:Object(Z.a)([K,Q],(function(t,e){var n=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(n)}))}))};var $=function(){var t=Object(a.useState)(""),e=Object(B.a)(t,2),n=e[0],r=e[1],o=Object(a.useState)(""),i=Object(B.a)(o,2),u=i[0],l=i[1],b=Object(s.c)(X.getContactsItem),j=Object(s.b)(),d=function(t){switch(t.currentTarget.name){case"name":r(t.currentTarget.value);break;case"number":l(t.currentTarget.value);break;default:return}},f=function(t){return j(function(t){var e=t.name,n=t.number;return function(t){t(q());var c={name:e,number:n};y.a.post("/contacts",c).then((function(e){var n=e.data;return t(z(n))})).catch((function(e){return t(P(e))}))}}(t))};return Object(a.useEffect)((function(){j((function(t){t(E()),y.a.get("/contacts").then((function(e){var n=e.data;return t(A(n))})).catch((function(e){return t(R(e))}))}))}),[j]),Object(c.jsxs)("form",{className:M.a.form,onSubmit:function(t){t.preventDefault();var e={name:n,number:u};b.find((function(t){return t.name.toLowerCase()===n.toLowerCase()}))?alert("".concat(n," is already in contacts.")):f(e),r(""),l("")},children:[Object(c.jsxs)("label",{className:M.a.label,children:["Name",Object(c.jsx)("input",{type:"text",name:"name",className:M.a.input,value:n,onChange:d})]}),Object(c.jsxs)("label",{className:M.a.label,children:["Number",Object(c.jsx)("input",{type:"tel",name:"number",className:M.a.input,value:u,onChange:d})]}),Object(c.jsx)("button",{type:"submit",className:M.a.button,children:"Add contact"})]})},tt=n(7),et=n.n(tt),nt=n(35),ct=n.n(nt);function at(){var t=Object(s.c)(X.getVisibleContacts),e=Object(s.b)();return Object(c.jsx)("ul",{className:ct.a.formContact,children:t.map((function(t){var n=t.id,a=t.name,r=t.number;return Object(c.jsxs)("li",{className:ct.a.formContactItem,children:[a,": ",r,Object(c.jsx)("button",{className:ct.a.formContactButton,type:"button",onClick:function(){return e(G(n))},children:"Delete"})]},n)}))})}var rt=at;at.propType={contacts:et.a.arrayOf(et.a.shape({id:et.a.string,name:et.a.string,number:et.a.string})),onDeleteContact:et.a.func};var ot=function(){var t=Object(s.c)(X.getFilter),e=Object(s.b)();return console.log(t),Object(c.jsx)("input",{type:"text",value:t,onChange:function(t){var n=t.target;return e(Y(n.value))}})};function it(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h2",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"}),Object(c.jsx)("h3",{children:"Phonebook"}),Object(c.jsx)($,{}),Object(c.jsx)("h3",{children:"Find contacts by name"}),Object(c.jsx)(ot,{}),Object(c.jsx)("h2",{children:"Contacts"}),Object(c.jsx)(rt,{})]})}var st=n(112),ut={form:{width:320},label:{display:"flex",flexDirection:"column",marginBottom:15}};function lt(){var t=Object(s.b)(),e=Object(a.useState)(),n=Object(B.a)(e,2),r=n[0],o=n[1],i=Object(a.useState)(),u=Object(B.a)(i,2),l=u[0],b=u[1],j=Object(a.useState)(),d=Object(B.a)(j,2),f=d[0],O=d[1],h=function(t){var e=t.target,n=e.name,c=e.value;switch(n){case"name":return o(c);case"email":return b(c);case"password":return O(c);default:return}};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"\u0421\u0442\u043e\u0440\u0456\u043d\u043a\u0430 \u0440\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u0457"}),Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(I.register({name:r,email:l,password:f})),o(""),b(""),O("")},style:ut.form,children:[Object(c.jsxs)("label",{style:ut.label,children:["\u0406\u043c'\u044f",Object(c.jsx)("input",{type:"text",name:"name",value:r,onChange:h})]}),Object(c.jsxs)("label",{style:ut.label,children:["\u041f\u043e\u0448\u0442\u0430",Object(c.jsx)("input",{type:"email",name:"email",value:l,onChange:h})]}),Object(c.jsxs)("label",{style:ut.label,children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(c.jsx)("input",{type:"password",name:"password",value:f,onChange:h})]}),Object(c.jsx)(st.a,{type:"submit",variant:"contained",color:"primary",children:"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044f"})]})]})}var bt={form:{width:320},label:{display:"flex",flexDirection:"column",marginBottom:15}};function jt(){var t=Object(s.b)(),e=Object(a.useState)(),n=Object(B.a)(e,2),r=n[0],o=n[1],i=Object(a.useState)(),u=Object(B.a)(i,2),l=u[0],b=u[1],j=function(t){var e=t.target,n=e.name,c=e.value;switch(n){case"email":return o(c);case"password":return b(c);default:return}};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"\u0421\u0442\u043e\u0440\u0456\u043d\u043a\u0430 \u043b\u043e\u0433\u0456\u043d\u0430"}),Object(c.jsxs)("form",{style:bt.form,onSubmit:function(e){e.preventDefault(),t(I.logIn({email:r,password:l})),o(""),b("")},children:[Object(c.jsxs)("label",{style:bt.label,children:["\u041f\u043e\u0448\u0442\u0430",Object(c.jsx)("input",{type:"email",name:"email",value:r,onChange:j})]}),Object(c.jsxs)("label",{style:bt.label,children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(c.jsx)("input",{type:"password",name:"password",value:l,onChange:j})]}),Object(c.jsx)(st.a,{type:"submit",variant:"contained",color:"primary",children:"\u0423\u0432\u0456\u0439\u0442\u0438"})]})]})}var dt=n(24),ft=n(34);function Ot(t){var e=t.children,n=t.redirectTo,a=void 0===n?"/login":n,r=Object(ft.a)(t,["children","redirectTo"]),o=Object(s.c)(j.getIsLoggedIn);return Object(c.jsx)(b.b,Object(dt.a)(Object(dt.a)({},r),{},{children:o?e:Object(c.jsx)(b.a,{to:a})}))}function ht(t){var e=t.children,n=t.restricted,a=void 0!==n&&n,r=Object(ft.a)(t,["children","restricted"]),o=Object(s.c)(j.getIsLoggedIn)&&a;return Object(c.jsx)(b.b,Object(dt.a)(Object(dt.a)({},r),{},{children:o?Object(c.jsx)(b.a,{to:"/contacts"}):e}))}n(96);var mt,gt,pt,xt=function(){var t=Object(s.b)(),e=Object(s.c)(j.getIsFetchingCurrent);return Object(a.useEffect)((function(){t(I.fetchCurrentUser())}),[t]),!e&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(D,{}),Object(c.jsxs)(b.d,{children:[Object(c.jsx)(ht,{path:"/",exact:!0,children:Object(c.jsx)(T,{})}),Object(c.jsx)(Ot,{path:"/contacts",exact:!0,redirectTo:"/login",children:Object(c.jsx)(it,{})}),Object(c.jsx)(ht,{path:"/register",exact:!0,restricted:!0,children:Object(c.jsx)(lt,{})}),Object(c.jsx)(ht,{path:"/login",exact:!0,restricted:!0,children:Object(c.jsx)(jt,{})})]})]})},vt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,113)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),c(t),a(t),r(t),o(t)}))},Ct=n(33),yt=n(52),kt=n.n(yt),_t=n(20),wt=n(53),It=n.n(wt),Lt=n(5),Nt=n(9),Ft=Object(k.d)([],(mt={},Object(Lt.a)(mt,A,(function(t,e){return e.payload})),Object(Lt.a)(mt,z,(function(t,e){return[e.payload].concat(Object(Ct.a)(t))})),Object(Lt.a)(mt,V,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),mt)),St=Object(k.d)("",Object(Lt.a)({},Y,(function(t,e){return e.payload}))),Ut=Object(k.d)(!1,(gt={},Object(Lt.a)(gt,E,(function(){return!0})),Object(Lt.a)(gt,A,(function(){return!1})),Object(Lt.a)(gt,R,(function(){return!1})),Object(Lt.a)(gt,q,(function(){return!0})),Object(Lt.a)(gt,z,(function(){return!1})),Object(Lt.a)(gt,P,(function(){return!1})),Object(Lt.a)(gt,J,(function(){return!0})),Object(Lt.a)(gt,V,(function(){return!1})),Object(Lt.a)(gt,W,(function(){return!1})),gt)),Dt=Object(Nt.c)({item:Ft,filter:St,loading:Ut}),Tt=Object(k.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1},extraReducers:(pt={},Object(Lt.a)(pt,I.register.fulfilled,(function(t,e){console.log("!!!action register in auth-slice",e),t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(Lt.a)(pt,I.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(Lt.a)(pt,I.logOut.fulfilled,(function(t,e){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(Lt.a)(pt,I.fetchCurrentUser.pending,(function(t){t.isFetchingCurrentUser=!0})),Object(Lt.a)(pt,I.fetchCurrentUser.fulfilled,(function(t,e){t.user=e.payload,t.isLoggedIn=!0,t.isFetchingCurrentUser=!1})),Object(Lt.a)(pt,I.fetchCurrentUser.rejected,(function(t){t.isFetchingCurrentUser=!1})),pt)}).reducer,Bt=[].concat(Object(Ct.a)(Object(k.f)({serializableCheck:{ignoredActions:[_t.a,_t.f,_t.b,_t.c,_t.d,_t.e]}})),[kt.a]),Et={key:"auth",storage:It.a,whitelist:["token"]},At=Object(k.a)({reducer:{contacts:Dt,auth:Object(_t.g)(Et,Tt)},middleware:Bt,devTools:!1}),Rt=Object(_t.h)(At);i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(s.a,{store:At,children:Object(c.jsx)(u.a,{loading:null,persistor:Rt,children:Object(c.jsx)(l.a,{children:Object(c.jsx)(xt,{})})})})}),document.getElementById("root")),vt()}},[[99,1,2]]]);
//# sourceMappingURL=main.e7638e68.chunk.js.map